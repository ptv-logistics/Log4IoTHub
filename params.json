{
  "name": "Log4IoTHub",
  "tagline": "Azure IoT Hub appender for log4net",
  "body": "﻿### Log4IoTHub\r\n\r\nAzure IoT Hub appender for log4net... sending messages to the Azure IoT Hub by HttpWebRequest to avoid Service Bus SDK dependencies. The Messages will also be logged/sent\r\nasynchronously for high performance and to avoid blocking the caller thread.\r\n\r\n## Use the nuget package \r\n- **https://www.nuget.org/packages/Log4IoTHub/**\r\n- Add package to your project `Install-Package Log4IoTHub`\r\n\r\n## Simple Log4IoTHub Example\r\n\r\nThis example is also available as a [LoggerTests.cs](https://github.com/ptv-logistics/Log4IoTHub/blob/master/Log4IoTHubTest/LoggerTests.cs):\r\n\r\n```csharp\r\nusing log4net;\r\nusing System;\r\n\r\nnamespace Log4IoTHubTest\r\n{\r\n    class LoggerTests\r\n    {\r\n\r\n        private static ILog iotHubLogger = LogManager.GetLogger(\"Log4IoTHubLogger\");\r\n\r\n        static void Main(string[] args)\r\n        {\r\n \r\n            for (int i = 0; i < 2000; i++)\r\n            {\r\n                iotHubLogger.Info(new { id = $\"mob-{i}\", message = $\"hallo-{i}\" });\r\n\r\n            }\r\n\r\n\r\n            System.Threading.Thread.Sleep(new TimeSpan(0, 10, 0));\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n## Example App Configuration file\r\n\r\nThis configuration is also available as a [App.config](https://github.com/ptv-logistics/Log4IoTHub/blob/master/Log4IoTHubTest/App.config):\r\n\r\n\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<configuration>\r\n  <startup>\r\n    <supportedRuntime version=\"v4.0\" sku=\".NETFramework,Version=v4.5.2\" />\r\n  </startup>\r\n\r\n  <appSettings>\r\n    <!--\r\n    don't forget to add [assembly: log4net.Config.XmlConfigurator()] to AssemblyInfo.cs\r\n    -->\r\n    <add key=\"log4net.Config\" value=\"log4net.config\"/>\r\n    <add key=\"log4net.Config.Watch\" value=\"True\"/>\r\n  </appSettings>\r\n\r\n</configuration>\r\n```\r\n\r\n## Example Log4Net Configuration file\r\n\r\nPlease use the [Device Explorer](https://github.com/Azure/azure-iot-sdks/blob/master/tools/DeviceExplorer/readme.md) to create your own deviceId and deviceKey.\r\nThis configuration is also available as a [log4net.config](https://github.com/ptv-logistics/Log4IoTHub/blob/master/Log4IoTHubTest/log4net.config):\r\n\r\n\r\n```xml\r\n﻿<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<log4net>\r\n  \r\n  <appender name=\"Log4IoTHubAppender\"\r\n               type=\"Log4IoTHub.Log4IoTHubAppender, Log4IoTHub\">\r\n\r\n    <!--mandatory id of the Azure IoT Hub device -->\r\n    <deviceId value=\"YOUR_DEVICE_ID\" />\r\n    <!--mandatory primary key of the Azure IoT Hub device -->\r\n    <deviceKey value=\"YOUR_DEVICE_KEY\" />\r\n    <!--optional Azure REST API version -->\r\n    <azureApiVersion value=\"2015-08-15-preview\" />\r\n    <!--mandatory Azure IoT Hub hostname/dns -->\r\n    <iotHubName value=\"YOUR_IOT_HUB.azure-devices.net\" />\r\n    \r\n    <!--optional meta data which should be logged to the IoT Hub-->\r\n    <!--<metaDataJson value=\"{MetadataVersion:'1.0',Product:'dave',ProductVersion:'2016.1',Lifecycle:'prod',Licence:'full',Customer:'core',Component:'core'}\" />-->\r\n\r\n    <!-- \r\n    optional debug setting which should only be used during development or on testsystem.\r\n    Set logMessageToFile=true to inspect your messages (in log4IoTHub_info.log) which will \r\n    be sent to the Azure IoT Hub.\r\n    -->\r\n    <!--<logMessageToFile value=\"true\"/>-->\r\n    \r\n    <!-- \r\n    optional name of an logger defined further down with an depending appender e.g. \r\n    logentries to log internal errors. If the value is empty or the property isn't defined \r\n    errors will only be logged to log4IoTHub_error.log\r\n    -->\r\n    <!--<errLoggerName value=\"Log4IoTHubErrors2LogentriesLogger\"/>-->\r\n    \r\n    <!-- optional proxy settings\r\n    <webProxyHost value=\"YOUR_PROXY_HOST_IF_REQUIRED\" />\r\n    <webProxyPort value=\"YOUR_PROXY_PORT_IF_REQUIRED\" />\r\n    -->\r\n  </appender>\r\n\r\n\r\n  <!--\r\n  <appender name=\"LeAppender\" type=\"log4net.Appender.LogentriesAppender, LogentriesLog4net\">\r\n    <immediateFlush value=\"true\" />\r\n    <useSsl value=\"true\" />\r\n    <token value=\"YOUR_LOGENTRIES_TOKEN\" />\r\n    <layout type=\"log4net.Layout.PatternLayout\">\r\n      <param name=\"ConversionPattern\" value=\"%d{yyyy-MM-dd HH:mm:ss.fff zzz};loglevel=%level%;operation=%m;\" />\r\n    </layout>\r\n    <filter type=\"log4net.Filter.LevelRangeFilter\">\r\n      <levelMin value=\"INFO\" />\r\n      <levelMax value=\"FATAL\" />\r\n    </filter>\r\n  </appender>\r\n\r\n  <logger name=\"Log4IoTHubErrors2LogentriesLogger\" additivity=\"false\">\r\n    <level value=\"ALL\" />\r\n    <appender-ref ref=\"LeAppender\" />\r\n  </logger>\r\n  -->\r\n\r\n  <logger name=\"Log4IoTHubLogger\" additivity=\"false\">\r\n    <appender-ref ref=\"Log4IoTHubAppender\" />\r\n  </logger>\r\n  \r\n</log4net>\r\n```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}